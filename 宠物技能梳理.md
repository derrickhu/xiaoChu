# 宠物技能梳理文档

> 更新时间：2026-02-19（爽感重做版）
> 基于 `js/data/pets.js`、`js/engine/skills.js`、`js/engine/battle.js` 代码

## 一、技能类型总览（38种）

| 技能类型 | 效果说明 | 使用宠物数 |
|---------|---------|-----------|
| dmgBoost | 下次指定属性伤害×N倍 | 10 |
| convertBead | 随机N颗珠子变为指定属性（可含beadBoost） | 5 |
| convertRow | 整行珠子变为指定属性 | 5 |
| convertCol | 整列珠子变为指定属性 | 2 |
| convertCross | 十字形珠子变为指定属性 | 4 |
| shield | 获得护盾N点（可含bonusPct） | 3 |
| shieldPlus | 护盾+本回合减伤 | 4 |
| shieldReflect | 护盾+反弹伤害 | 2 |
| reduceDmg | 本回合受到伤害-X% | 0（已合并入shieldPlus） |
| stun | 敌人眩晕N回合 | 5 |
| stunDot | 眩晕+中毒 | 1 |
| stunPlusDmg | 眩晕+下次属性伤害×N倍 | 4 |
| stunBreakDef | 眩晕+破甲（敌人防御归零） | 1 |
| instantDmg | 立即造成一次属性伤害(pct%攻击力) | 8 |
| instantDmgDot | 立即伤害+追加灼烧DOT | 1 |
| multiHit | 连续攻击N次，每次pct%伤害 | 4 |
| teamAttack | 全队主动攻击，每只宠物造成pct%伤害 | 1 |
| healPct | 立即回复X%最大血量 | 2 |
| healFlat | 立即回复N点血量 | 0（已升级为healPct） |
| healOnElim | 消除对应属性珠时回血X%持续N回合 | 3 |
| dot | 敌人中毒/灼烧 或 己方回春 | 3 |
| hpMaxUp | 血量上限+X%+立即回满 | 2 |
| hpMaxShield | 血量上限+X%+护盾N点 | 2 |
| heartBoost | 心珠效果×N持续M回合 | 1 |
| allDmgUp | 全属性伤害+X%持续N回合 | 1 |
| allAtkUp | 全队攻击+X%持续N回合 | 2 |
| allDefUp | 全队防御+X%持续N回合 | 2 |
| critBoost | 暴击率+X%持续N回合（可perCombo递增） | 2 |
| critDmgUp | 暴击伤害+X%+可含必暴击 | 1 |
| guaranteeCrit | 必暴击+暴击伤害+N% | 2 |
| reflectPct | 反弹X%伤害N回合 | 2 |
| shieldOnElim | 消除对应属性珠获护盾N点 | 2 |
| immuneCtrl | 免疫所有控制N回合 | 2 |
| immuneShield | 免疫控制+护盾 | 1 |
| purify | 清除所有负面+免疫控制N回合 | 1 |
| comboPlusNeverBreak | Combo+N且不会断 | 2 |
| comboNeverBreakPlus | Combo不断+Combo伤害+X% | 1 |
| comboDmgUp | Combo伤害额外+X% | 1 |
| extraTimePlus | 转珠时间+N秒（可含comboNeverBreak/beadBoost） | 2 |
| ignoreDefFull | 无视全部防御+伤害×1.5 | 2 |
| revivePlus | 抵挡致死+回复X%血量 | 1 |
| fullHealPlus | 满血+全队攻击+X% | 1 |
| warGod | 全队攻击+X%+必暴击 | 1 |
| lowHpDmgUp | 残血时伤害+X% | 1 |
| dmgImmune | 本回合伤害变1点 | 2 |
| onKillHeal | 击杀回血X% | 1 |
| beadRateUp | 指定属性珠概率大增 | 0（已合入convertBead的beadBoost） |
| comboPlus | Combo+N | 0（已升级为comboPlusNeverBreak） |

---

## 二、技能实现状态

> 爽感重做版对全部100只宠物进行了重新设计，CD缩短至3-6回合，效果大幅增强。
> 所有38种技能类型均已在 `skills.js` 和 `battle.js` 中完整实现。

| 状态 | 说明 |
|------|------|
| ✅ 全部已实现 | 38种技能类型在 skills.js 的 switch-case 中均有对应处理 |
| ✅ heroBuffs已修复 | ignoreDefFull、immuneCtrl、allDefUp、onKillHeal 等 heroBuffs 类型已在 battle.js 中正确检查 |
| ✅ 新增类型已实现 | multiHit、teamAttack、stunDot、stunBreakDef、shieldReflect、shieldPlus、hpMaxShield、immuneShield、purify、revivePlus、fullHealPlus、warGod、instantDmgDot、comboNeverBreakPlus、comboPlusNeverBreak、extraTimePlus、ignoreDefFull、convertRow、convertCol、convertCross 等新类型均已实现 |
| ✅ 废弃类型已清理 | percentAtkUp（改为convertCross）、replaceBeads（改为convertCross）、reduceDmg（合入shieldPlus）、healFlat（升级为healPct）、beadRateUp（合入convertBead的beadBoost）、comboPlus（升级为comboPlusNeverBreak）等已废弃 |

---

## 三、按属性分类的100只宠物

> 数据来源：`js/data/pets.js`（爽感重做版）
> 攻击力范围：8-14 | CD范围：3-6

### 金属性（20只）
| ID | 名称 | 攻击 | 技能名 | 技能效果 | CD | 类型 |
|----|------|------|--------|---------|-----|------|
| m1 | 金锋灵猫 | 8 | 锋芒斩 | 下次金属性伤害×2倍 | 3 | dmgBoost |
| m2 | 锐金鼠将 | 9 | 金珠阵 | 整行珠子变为金珠 | 4 | convertRow |
| m3 | 玄甲金狮 | 9 | 金甲术 | 获得护盾80点+本回合免伤50% | 4 | shieldPlus |
| m4 | 天罡金鹏 | 10 | 天罡击 | 对敌人造成250%攻击力伤害 | 4 | instantDmg |
| m5 | 碎金战将 | 11 | 金缚锁 | 敌人眩晕2回合 | 5 | stun |
| m6 | 金光剑灵 | 11 | 剑气纵横 | Combo+3，且本次Combo不会断 | 4 | comboPlusNeverBreak |
| m7 | 金罡守卫 | 9 | 罡气盾 | 获得护盾100点 | 4 | shield |
| m8 | 鸣金神雀 | 10 | 鸣金诀 | 转珠时间+3秒+金珠概率大增 | 5 | extraTimePlus |
| m9 | 破甲金将 | 12 | 破甲斩 | 下次金攻无视全部防御+伤害×1.5 | 4 | ignoreDefFull |
| m10 | 九天金凰 | 12 | 金身不灭 | 抵挡一次致死伤害+回复50%血量 | 6 | revivePlus |
| m11 | 锐金斥候 | 11 | 锐金三连 | 连续攻击3次，每次100%攻击力 | 4 | multiHit |
| m12 | 金纹战将 | 11 | 金愈阵 | 消除金珠时回血15%，持续3回合 | 4 | healOnElim |
| m13 | 金影刺客 | 12 | 致命金刺 | 必定暴击+暴击伤害+100% | 4 | guaranteeCrit |
| m14 | 金甲神卫 | 10 | 绝对防御 | 本回合受到伤害变为1点 | 5 | dmgImmune |
| m15 | 金虹使者 | 12 | 金虹贯日 | 十字形珠子全变金珠 | 5 | convertCross |
| m16 | 金罡战魂 | 11 | 战魂爆发 | 全队攻击+50%持续2回合 | 5 | allAtkUp |
| m17 | 金翎神使 | 11 | 金翎风暴 | 随机8颗变金珠+金珠概率大增 | 4 | convertBead |
| m18 | 金锋战神 | 13 | 战神降临 | 全队攻击+40%持续3回合+必暴击1回合 | 6 | warGod |
| m19 | 金耀星君 | 12 | 星耀裂空 | 眩晕2回合+下次金伤×3倍 | 5 | stunPlusDmg |
| m20 | 万钧金神 | 14 | 万钧神威 | 立即造成500%金属性爆裂伤害 | 5 | instantDmg |

### 木属性（20只）
| ID | 名称 | 攻击 | 技能名 | 技能效果 | CD | 类型 |
|----|------|------|--------|---------|-----|------|
| w1 | 青灵木鹿 | 8 | 春回大地 | 立即回复30%血量 | 3 | healPct |
| w2 | 藤萝灵蛇 | 8 | 剧毒蛇牙 | 剧毒：每回合50点，持续3回合 | 4 | dot |
| w3 | 苍木灵熊 | 9 | 熊力护体 | 护盾100点+反弹20%伤害2回合 | 4 | shieldReflect |
| w4 | 万木灵狐 | 9 | 万木化珠 | 整列珠子变木珠 | 4 | convertCol |
| w5 | 灵木仙子 | 10 | 生生不息 | 每回合回血40点，持续3回合 | 4 | dot(回春) |
| w6 | 青木战灵 | 11 | 木灵爆发 | 下次木属性伤害×2.5倍 | 3 | dmgBoost |
| w7 | 缠枝藤君 | 10 | 缠枝锁魂 | 敌人眩晕2回合+中毒30/回合 | 5 | stunDot |
| w8 | 枯木老妖 | 9 | 古木回春 | 血量上限+30%+立即回复等量血量 | 5 | hpMaxUp |
| w9 | 木灵使者 | 11 | 灵心愈术 | 心珠效果×3持续2回合 | 4 | heartBoost |
| w10 | 万木之主 | 12 | 万木天威 | 全队全属性伤害+40%持续3回合 | 6 | allDmgUp |
| w11 | 青藤守卫 | 9 | 藤甲壁垒 | 护盾120点+减伤30%持续2回合 | 5 | shieldPlus |
| w12 | 翠竹灵蟋 | 11 | 翠竹连击 | 连续攻击3次，每次120%木属性伤害 | 4 | multiHit |
| w13 | 灵芝仙菇 | 9 | 净化万毒 | 清除所有负面+免疫控制2回合 | 4 | purify |
| w14 | 苍蟒木蛟 | 11 | 蛟龙回春 | 消除木珠回血12%，持续3回合 | 4 | healOnElim |
| w15 | 木灵仙鹿 | 10 | 仙鹿满愈 | 满血回复+全队攻击+20% | 5 | fullHealPlus |
| w16 | 千年古藤 | 12 | 古藤缠天 | 十字形珠子全变木珠 | 5 | convertCross |
| w17 | 碧玉螳螂 | 11 | 螳螂无双 | Combo不断+Combo伤害+50% | 4 | comboNeverBreakPlus |
| w18 | 青鸾翠雀 | 11 | 翠雀风舞 | 整行变木珠+木珠概率大增 | 4 | convertRow |
| w19 | 万木神龟 | 12 | 神龟之力 | 血量上限+40%+护盾100点 | 6 | hpMaxShield |
| w20 | 神木麒麟 | 14 | 神木灭世 | 立即500%木属性爆裂伤害 | 5 | instantDmg |

### 水属性（20只）
| ID | 名称 | 攻击 | 技能名 | 技能效果 | CD | 类型 |
|----|------|------|--------|---------|-----|------|
| s1 | 沧澜水雀 | 8 | 水珠涌现 | 整列珠子变水珠 | 4 | convertCol |
| s2 | 冰魄灵龟 | 9 | 冰魄铠甲 | 护盾100点+免伤60%本回合 | 4 | shieldPlus |
| s3 | 海灵蛟童 | 9 | 寒冰封印 | 冰冻敌人2回合 | 5 | stun |
| s4 | 玄水蛟龙 | 10 | 蛟龙怒击 | 250%水属性直接伤害 | 4 | instantDmg |
| s5 | 碧波灵蛙 | 9 | 碧波愈泉 | 回复40%血量 | 4 | healPct |
| s6 | 流水灵鱼 | 11 | 水灵爆涌 | 下次水属性伤害×2.5倍 | 3 | dmgBoost |
| s7 | 寒冰灵蟹 | 10 | 寒冰之壁 | 反弹40%伤害持续2回合 | 4 | reflectPct |
| s8 | 海魂巨鲸 | 11 | 鲸吞回复 | 消除水珠回血12%持续3回合 | 4 | healOnElim |
| s9 | 凝水灵蚌 | 9 | 凝水护体 | 免疫所有控制2回合 | 5 | immuneCtrl |
| s10 | 沧海龙神 | 13 | 龙神覆海 | 全场一半珠子变水珠（约18颗） | 6 | convertBead |
| s11 | 冰玄灵蛾 | 11 | 冰玄风暴 | 随机8颗变水珠+水珠概率大增 | 4 | convertBead |
| s12 | 沧澜海蛇 | 12 | 海蛇三连 | 连续攻击3次，每次120%水伤害 | 4 | multiHit |
| s13 | 玄水灵蟾 | 10 | 水盾壁障 | 护盾120点 | 4 | shield |
| s14 | 冰魄灵鹤 | 12 | 冰魄封天 | 眩晕2回合+水伤×2倍 | 5 | stunPlusDmg |
| s15 | 海灵水母 | 11 | 水母幻术 | 转珠时间+3秒+Combo不断 | 5 | extraTimePlus |
| s16 | 水镜灵蝶 | 11 | 水镜反射 | 反弹50%伤害1回合+护盾80 | 4 | shieldReflect |
| s17 | 沧澜鲲鹏 | 14 | 鲲鹏怒涛 | 500%水属性爆裂伤害 | 5 | instantDmg |
| s18 | 玄水神蛟 | 12 | 神蛟护佑 | 全队防御+50%持续3回合 | 5 | allDefUp |
| s19 | 水纹灵獭 | 11 | 灵獭水盾 | 消除水珠获护盾60点持续3回合 | 4 | shieldOnElim |
| s20 | 冰凰神鸟 | 11 | 冰凰绝对 | 免疫所有控制2回合+护盾100 | 5 | immuneShield |

### 火属性（20只）
| ID | 名称 | 攻击 | 技能名 | 技能效果 | CD | 类型 |
|----|------|------|--------|---------|-----|------|
| f1 | 赤焰火狐 | 8 | 焰爪连击 | 下次火属性伤害×2倍 | 3 | dmgBoost |
| f2 | 焚天火狼 | 9 | 烈火珠阵 | 整行珠子变火珠 | 4 | convertRow |
| f3 | 烈阳火凰 | 11 | 凤凰烈焰 | 350%火属性直接伤害 | 4 | instantDmg |
| f4 | 炎狱火麟 | 11 | 炎狱暴击 | 必暴击+暴击伤害+100% | 4 | guaranteeCrit |
| f5 | 爆炎火蟾 | 10 | 烈焰灼烧 | 剧毒灼烧：每回合60点持续3回合 | 4 | dot |
| f6 | 火莲灵花 | 11 | 火莲绽放 | Combo伤害额外+60% | 4 | comboDmgUp |
| f7 | 焚天火鸦 | 11 | 焚天之怒 | 敌人眩晕2回合 | 5 | stun |
| f8 | 赤炎火蝎 | 11 | 炎魔连击 | Combo+4且不会断 | 4 | comboPlusNeverBreak |
| f9 | 火灵赤蛇 | 10 | 火蛇吸血 | 击杀怪物后满血 | 5 | onKillHeal |
| f10 | 朱雀神火 | 13 | 朱雀圣焰 | 全队暴击率+80%持续3回合 | 5 | critBoost |
| f11 | 焚天火猿 | 12 | 焚魂珠阵 | 随机8颗变火珠+火珠概率大增 | 4 | convertBead |
| f12 | 炎狱火蜥 | 12 | 炎狱三连 | 连续攻击3次，每次130%火伤害 | 4 | multiHit |
| f13 | 烈阳火鹰 | 11 | 烈阳风暴 | 全队主动攻击，每只150%伤害 | 5 | teamAttack |
| f14 | 火凰灵蝶 | 12 | 凰翼爆炎 | 暴击伤害+80%+必暴击1回合 | 5 | critDmgUp |
| f15 | 炎爆火鼠 | 12 | 炎爆裂天 | 眩晕2回合+火伤×3倍 | 5 | stunPlusDmg |
| f16 | 焚天火蟒 | 14 | 天火焚灭 | 500%火属性爆裂伤害+灼烧 | 5 | instantDmgDot |
| f17 | 赤焰麒麟 | 13 | 麒麟战焰 | 全队攻击+50%持续3回合 | 6 | allAtkUp |
| f18 | 火元灵龟 | 12 | 元火暴击 | 每段Combo暴击率+10% | 4 | critBoost(perCombo) |
| f19 | 炎狱火龙 | 12 | 龙炎破甲 | 火伤无视全部防御+伤害×1.5 | 4 | ignoreDefFull |
| f20 | 火灵神猫 | 11 | 余烬爆发 | 残血时伤害+80% | 4 | lowHpDmgUp |

### 土属性（20只）
| ID | 名称 | 攻击 | 技能名 | 技能效果 | CD | 类型 |
|----|------|------|--------|---------|-----|------|
| e1 | 厚土石灵 | 9 | 厚土护体 | 护盾100点+减伤50%本回合 | 4 | shieldPlus |
| e2 | 山岳石怪 | 9 | 山岳珠阵 | 整行珠子变土珠 | 4 | convertRow |
| e3 | 镇地石犀 | 10 | 镇地壁垒 | 获得护盾150点 | 4 | shield |
| e4 | 玄武圣兽 | 11 | 玄武震慑 | 敌人眩晕2回合 | 5 | stun |
| e5 | 裂地穿山甲 | 12 | 裂地重击 | 下次土属性伤害×2.5倍 | 3 | dmgBoost |
| e6 | 山岩石蟹 | 10 | 岩甲回春 | 血量上限+30%+立即回满 | 5 | hpMaxUp |
| e7 | 镇山石狮 | 11 | 石狮无畏 | 免疫所有控制2回合 | 5 | immuneCtrl |
| e8 | 大地灵鼹 | 11 | 大地反噬 | 反弹50%伤害2回合 | 4 | reflectPct |
| e9 | 玄土石蟒 | 12 | 蟒击碎岩 | 350%土属性直接伤害 | 4 | instantDmg |
| e10 | 后土神兽 | 13 | 后土庇佑 | 全队防御+60%持续3回合 | 6 | allDefUp |
| e11 | 厚土灵虫 | 11 | 土魂涌现 | 随机8颗变土珠+土珠概率大增 | 4 | convertBead |
| e12 | 山岳灵兔 | 12 | 兔踢三连 | 连续攻击3次，每次120%土伤害 | 4 | multiHit |
| e13 | 镇地石龙 | 11 | 镇地龙盾 | 护盾120点+护盾效果+50% | 4 | shield(bonusPct) |
| e14 | 玄土灵蛤 | 12 | 蛤蟆震地 | 眩晕1回合+破甲（防御归零） | 4 | stunBreakDef |
| e15 | 裂地灵蚁 | 11 | 灵蚁护盾 | 消除土珠获护盾70点持续3回合 | 4 | shieldOnElim |
| e16 | 山岩石象 | 11 | 象踏山崩 | 本回合受伤变为1点 | 5 | dmgImmune |
| e17 | 后土灵蚕 | 10 | 地脉转珠 | 十字形珠子全变土珠 | 5 | convertCross |
| e18 | 镇地神牛 | 14 | 神牛碎天 | 500%土属性爆裂伤害 | 5 | instantDmg |
| e19 | 厚土灵龟 | 11 | 仙龟铁壁 | 血量上限+40%+护盾150点 | 6 | hpMaxShield |
| e20 | 玄武神君 | 13 | 玄武破天 | 眩晕2回合+土伤×3倍 | 5 | stunPlusDmg |

---

## 四、版本更新记录

### 爽感重做版（2026-02-19）— 宠物系统全面重做

#### 1. 100只宠物数据重做
- **攻击力**：旧版7-13 → 新版8-14，整体上调
- **CD范围**：旧版6-13 → 新版3-6，大幅缩短，技能释放更频繁
- **技能类型**：旧版约28种 → 新版38种，新增大量强力类型
- **技能效果**：全面增强，倍率制替代百分比加成（如dmgBoost从+30%改为×2倍）
- **变珠技能**：从随机3-5颗升级为整行/整列/十字级别（convertRow/Col/Cross）

#### 2. 新增技能类型（相比旧版）
| 新类型 | 说明 | 代表宠物 |
|--------|------|---------|
| multiHit | 连续攻击N次 | m11锐金斥候、w12翠竹灵蟋、s12沧澜海蛇、f12炎狱火蜥、e12山岳灵兔 |
| teamAttack | 全队主动攻击 | f13烈阳火鹰 |
| stunDot | 眩晕+中毒 | w7缠枝藤君 |
| stunBreakDef | 眩晕+破甲 | e14玄土灵蛤 |
| stunPlusDmg | 眩晕+增伤 | m19金耀星君、s14冰魄灵鹤、f15炎爆火鼠、e20玄武神君 |
| shieldPlus | 护盾+减伤 | m3玄甲金狮、s2冰魄灵龟、w11青藤守卫、e1厚土石灵 |
| shieldReflect | 护盾+反弹 | w3苍木灵熊、s16水镜灵蝶 |
| hpMaxShield | 血上限+护盾 | w19万木神龟、e19厚土灵龟 |
| immuneShield | 免控+护盾 | s20冰凰神鸟 |
| purify | 清负面+免控 | w13灵芝仙菇 |
| revivePlus | 抵挡致死+回血 | m10九天金凰 |
| fullHealPlus | 满血+攻击加成 | w15木灵仙鹿 |
| warGod | 攻击加成+必暴击 | m18金锋战神 |
| instantDmgDot | 直伤+灼烧 | f16焚天火蟒 |
| comboPlusNeverBreak | Combo+N且不断 | m6金光剑灵、f8赤炎火蝎 |
| comboNeverBreakPlus | Combo不断+伤害 | w17碧玉螳螂 |
| extraTimePlus | 加时+附加效果 | m8鸣金神雀、s15海灵水母 |
| ignoreDefFull | 无视全防+增伤 | m9破甲金将、f19炎狱火龙 |
| convertRow | 整行变珠 | m2锐金鼠将、f2焚天火狼、w18青鸾翠雀、e2山岳石怪 |
| convertCol | 整列变珠 | w4万木灵狐、s1沧澜水雀 |
| convertCross | 十字变珠 | m15金虹使者、w16千年古藤、e17后土灵蚕 |
| lowHpDmgUp | 残血增伤 | f20火灵神猫 |
| dmgImmune | 伤害变1 | m14金甲神卫、e16山岩石象 |
| onKillHeal | 击杀回血 | f9火灵赤蛇 |
| comboDmgUp | Combo增伤 | f6火莲灵花 |

#### 3. 战斗交互优化
- **技能名称显示**：攻击类/非攻击类技能释放时均显示技能名称（_skillFlash），非攻击类同时显示技能描述
- **技能音效统一**：所有宠物技能统一使用 `skill.wav`，不再区分攻击/非攻击
- **敌方回合横幅**：移至屏幕顶部（safeTop + 8*S），不再遮挡血条
- **敌方攻击反馈**：增加伤害飘字、更强屏幕震动（shakeT:10/shakeI:6）、红色闪屏增强为渐晕效果（18帧）
- **敌人受击反馈**：使用 `lighter` 混合模式发光效果，完美适配透明PNG
- **敌人击败处理**：死亡动画结束后正确隐藏敌人图像
- **敌方技能显示**：敌方技能释放时显示技能名+技能描述

#### 4. 怪物数值平衡
- **普通怪HP翻倍**：6档30层制（1-5层120-240、6-10层260-480、11-15层500-850、16-20层880-1350、21-25层1400-2200、26-30层2300-3600）
- **防御系数提升**：ATK×0.3 → ATK×0.35
- **低层攻击微调**：1-5层ATK 3-6（原5-8），避免前期难度过高
